#!/usr/bin/env groovy
def appName= 'testing'
def major_version = 1.0
def Filename1= ${appName} + _ + ${major_version} + . + Build_number
node{ 
  stage('cloning repo'){
  checkout scm
}
  stage('Testing')
{
sh 'ls -la'
echo "Building test ${appName} with version ${major_version}"
sh 'mvn clean test'  
}
  stage('Building')
  {
    sh 'ls -lart'
    echo "Building the application ${appName} with version ${major_version}"
    sh 'mvn clean install'
  }
  stage('App rename')
  {
    echo "Renaming the application jar file name"
    sh 'mv $WORKSPACE/target/jb*.jar $WORKSPACE/target/${Filename1}.jar'
  }
}
